(function(){var e;var a;"use strict";a={};"use strict";var r={0:"1010100110",1:"1010110010",2:"1010010110",3:"1100101010",4:"1011010010",5:"1101010010",6:"1001010110",7:"1001011010",8:"1001101010",9:"1101001010","-":"1010011010",$:"1011001010",".":"11011011010","/":"11011010110",":":"11010110110","+":"10110110110"};var t={C:"10100100110","*":"10100100110",B:"10010010110",N:"10010010110",D:"10100110010",E:"10100110010",A:"10110010010",T:"10110010010"};a.encodeCodabar=function(e){if(!/^[C\*BNDEAT]?[-:0-9\$\.\/\+]*[C\*BNDEAT]?$/.test(e)){throw new Error('Cannot encode "'+e+'" in codabar.')}if(e.length===0){e="AA"}var a=!!t[e[0]];var n=!!t[e[e.length-1]];if(e.length===1&&a){throw new Error('Cannot encode "'+e+"\" as codabar: it's just a start/stop character")}if(a^n){throw new Error('Cannot encode "'+e+'" as codabar: must give both start and stop characters or neither start nor stop')}var s=[];if(!a){e="A"+e+"A"}for(var i=0;i<e.length;i++){var o=e[i];if(i===0||i===e.length-1){s.push({char:o,humanReadable:false,bits:t[o]});continue}s.push({char:o,humanReadable:true,bits:r[o]})}return{type:"bits",data:s}};"use strict";var n=0;var s=1;var i=2;var o=3;var c=4;var h=[[0," "," ","00","11011001100"],[1,"!","!","01","11001101100"],[2,'"','"',"02","11001100110"],[3,"#","#","03","10010011000"],[4,"$","$","04","10010001100"],[5," %"," %","05","10001001100"],[6,"&","&","06","10011001000"],[7,"'","'","07","10011000100"],[8,"(","(","08","10001100100"],[9,")",")","09","11001001000"],[10,"*","*","10","11001000100"],[11,"+","+","11","11000100100"],[12,", ",", ","12","10110011100"],[13,"-","-","13","10011011100"],[14,".",".","14","10011001110"],[15,"/","/","15","10111001100"],[16,"0","0","16","10011101100"],[17,"1","1","17","10011100110"],[18,"2","2","18","11001110010"],[19,"3","3","19","11001011100"],[20,"4","4","20","11001001110"],[21,"5","5","21","11011100100"],[22,"6","6","22","11001110100"],[23,"7","7","23","11101101110"],[24,"8","8","24","11101001100"],[25,"9","9","25","11100101100"],[26,":",":","26","11100100110"],[27,";",";","27","11101100100"],[28,"<","<","28","11100110100"],[29,"=","=","29","11100110010"],[30,">",">","30","11011011000"],[31,"?","?","31","11011000110"],[32,"@","@","32","11000110110"],[33,"A","A","33","10100011000"],[34,"B","B","34","10001011000"],[35,"C","C","35","10001000110"],[36,"D","D","36","10110001000"],[37,"E","E","37","10001101000"],[38,"F","F","38","10001100010"],[39,"G","G","39","11010001000"],[40,"H","H","40","11000101000"],[41,"I","I","41","11000100010"],[42,"J","J","42","10110111000"],[43,"K","K","43","10110001110"],[44,"L","L","44","10001101110"],[45,"M","M","45","10111011000"],[46,"N","N","46","10111000110"],[47,"O","O","47","10001110110"],[48,"P","P","48","11101110110"],[49,"Q","Q","49","11010001110"],[50,"R","R","50","11000101110"],[51,"S","S","51","11011101000"],[52,"T","T","52","11011100010"],[53,"U","U","53","11011101110"],[54,"V","V","54","11101011000"],[55,"W","W","55","11101000110"],[56,"X","X","56","11100010110"],[57,"Y","Y","57","11101101000"],[58,"Z","Z","58","11101100010"],[59,"[","[","59","11100011010"],[60,"\\","\\","60","11101111010"],[61,"]","]","61","11001000010"],[62,"^","^","62","11110001010"],[63,"_","_","63","10100110000"],[64,"\x00","`","64","10100001100"],[65,"","a","65","10010110000"],[66,"","b","66","10010000110"],[67,"","c","67","10000101100"],[68,"","d","68","10000100110"],[69,"","e","69","10110010000"],[70,"","f","70","10110000100"],[71,"","g","71","10011010000"],[72,"\b","h","72","10011000010"],[73,"","i","73","10000110100"],[74,"\n","j","74","10000110010"],[75,"","k","75","11000010010"],[76,"\f","l","76","11001010000"],[77,"\r","m","77","11110111010"],[78,"\b","n","78","11000010100"],[79,"	","o","79","10001111010"],[80,"","p","80","10100111100"],[81,"","q","81","10010111100"],[82,"","r","82","10010011110"],[83,"","s","83","10111100100"],[84,"","t","84","10011110100"],[85,"","u","85","10011110010"],[86,"","v","86","11110100100"],[87,"","w","87","11110010100"],[88,"","x","88","11110010010"],[89,"","y","89","11011011110"],[90,"","z","90","11011110110"],[91,"","{","91","11110110110"],[92,"","|","92","10101111000"],[93,"","}","93","10100011110"],[94,"","~","94","10001011110"],[95,"","","95","10111101000"],[96,"FNC 3","FNC 3","96","10111100010"],[97,"FNC 2","FNC 2","97","11110101000"],[98,"SHIFT B","SHIFT A","98","11110100010"],[99,"CODE C","CODE C","99","10111011110"],[100,"CODE B","FNC 4","CODE B","10111101110"],[101,"FNC 4","CODE A","CODE A","11101011110"],[102,"FNC 1","FNC 1","FNC 1","11110101110"],[103,"A0","A0","A0","11010000100"],[104,"B0","B0","B0","11010010000"],[105,"C0","C0","C0","11010011100"],[106,"STOP","STOP","STOP","1100011101011"]];var l=null;var d=null;var u=null;var v=null;var b=function(){if(l){return}l={};d={};u={};v={};for(var e=0;e<h.length;e++){var a=h[e];var r=a[n];var t=a[s];var c=a[i];var b=a[o];l[r]=a;d[t]=a;u[c]=a;v[b]=a}};a.encodeCode128=function(e){b();var a=new Array(1+e.length);a[0]="B0";for(var r=0,t=e.length;r<t;r++){a[1+r]=e[r]}for(var r=0;r<a.length;r++){var s=a[r];if(d[s]&&!u[s]){a.splice(r,0,"SHIFT A");r++}}var i=[];var o;switch(a[0]){case"A0":o="A";break;case"B0":o="B";break;case"C0":o="C";break;default:throw new Error("Expected a starting character")}var h;var f=0;for(var r=0;r<a.length;r++){var s=a[r];var w;switch(o){case"A":w=d[s];break;case"B":w=u[s];break;case"C":w=v[s];break}if(!w){throw new Error("Invalid input (no such char '"+s+"' in mode "+o)}var p=w[n];var R=w[c];var g=r||1;f+=g*p;i.push({bits:R,char:s,humanReadable:null,_mode:o,_val:p});if(h){o=h;h=null}switch(s){case"CODE A":o="A";break;case"CODE B":o="B";break;case"CODE C":o="C";break;case"SHIFT A":h=o;o="A";break;case"SHIFT B":h=o;o="B";break;default:break}}var m=f%103;var C=l[m];i.push({bits:C[c],char:"CHECKSUM",humanReadable:false,_val:m});var E=d.STOP;i.push({bits:E[c],char:"STOP",humanReadable:false,_val:E[n]});return{type:"bits",checksum:m,data:i}};"use strict";var f=0;var w=1;var p=2;var R=[["1",1,"110100101011"],["2",2,"101100101011"],["3",3,"110110010101"],["4",4,"101001101011"],["5",5,"110100110101"],["6",6,"101100110101"],["7",7,"101001011011"],["8",8,"110100101101"],["9",9,"101100101101"],["0",0,"101001101101"],["A",10,"110101001011"],["B",11,"101101001011"],["C",12,"110110100101"],["D",13,"101011001011"],["E",14,"110101100101"],["F",15,"101101100101"],["G",16,"101010011011"],["H",17,"110101001101"],["I",18,"101101001101"],["J",19,"101011001101"],["K",20,"110101010011"],["L",21,"101101010011"],["M",22,"110110101001"],["N",23,"101011010011"],["O",24,"110101101001"],["P",25,"101101101001"],["Q",26,"101010110011"],["R",27,"110101011001"],["S",28,"101101011001"],["T",29,"101011011001"],["U",30,"110010101011"],["V",31,"100110101011"],["W",32,"110011010101"],["X",33,"100101101011"],["Y",34,"110010110101"],["Z",35,"100110110101"],["-",36,"100101011011"],[".",37,"110010101101"],[" ",38,"100110101101"],["*",NaN,"100101101101"]];var g=null;var m=function(){if(g){return}g={};R.forEach(function(e){var a=e[f];g[a]=e})};a.encodeCode39=function(e,a){m();a=a||false;if(!e){e=""}e="*"+e+"*";var r=[];for(var t=0;t<e.length;t++){if(t!==0){r.push({char:"",bits:"0",humanReadable:false})}var n=e[t];var s=g[n];if(!s){throw new Error("Cannot encode code 39 barcode: invalid char: "+n)}var i=s[p];r.push({char:n,bits:i,humanReadable:true})}return{type:"bits",data:r}};"use strict";var C=0;var E=1;var k=2;var A=[["0001101","0100111","1110010"],["0011001","0110011","1100110"],["0010011","0011011","1101100"],["0111101","0100001","1000010"],["0100011","0011101","1011100"],["0110001","0111001","1001110"],["0101111","0000101","1010000"],["0111011","0010001","1000100"],["0110111","0001001","1001000"],["0001011","0010111","1110100"]];a.encodeEAN=function(e,a){if(!/^\d+$/.test(e)){throw new Error("EAN can only encode numbers.")}var r;if(a){r=e.substr(e.length-1,1);e=e.substr(0,e.length-1)}var t=e.length;var n=0;for(var s=0;s<t;s++){var i=e[s];var o=i-"0";var c=(t-s)%2===1?3:1;n+=c*o}var h=Math.round(n/10)*10;var l=h-n;if(l<0){l=h+10-n}if(a&&l!=r){throw new Error("Invalid checksum.")}e+=l;var d=[];var u;switch(e.length){case 8:u="LLLLRRRR";break;case 12:u="LLLLLLRRRRRR";break;case 13:switch(e[0]){case"0":u="LLLLLLRRRRRR";break;case"1":u="LLGLGGRRRRRR";break;case"2":u="LLGGLGRRRRRR";break;case"3":u="LLGGGLRRRRRR";break;case"4":u="LGLLGGRRRRRR";break;case"5":u="LGGLLGRRRRRR";break;case"6":u="LGGGLLRRRRRR";break;case"7":u="LGLGLGRRRRRR";break;case"8":u="LGLGGLRRRRRR";break;case"9":u="LGGLGLRRRRRR";break}d.push({char:e[0],humanReadable:true,bits:""});e=e.slice(1);break;default:throw new Error("Don't know how to make EAN with that length.")}d.push({char:"START",humanReadable:false,bits:"101"});for(var s=0;s<e.length;s++){if(s===e.length/2){d.push({char:"CENTER",humanReadable:false,bits:"01010"})}var v=e[s]-"0";var b=u[s];var f=b==="L"?C:b==="G"?E:k;var w=A[v][f];d.push({char:e[s],humanReadable:true,bits:w})}d.push({char:"END",humanReadable:false,bits:"101"});return{type:"bits",checksum:l,data:d}};"use strict";a.encodeFIM=function(e){if(!/^[ABCD]$/.test(e)){throw new Error("FIM can only encode 'A', 'B', 'C', or 'D'")}var a;switch(e){case"A":a="110010011";break;case"B":a="101101101";break;case"C":a="110101011";break;case"D":a="111010111";break}return{type:"bits",data:[{char:e,humanReadable:false,bits:a}]}};"use strict";var N=[[0,0,1,1,0],[1,0,0,0,1],[0,1,0,0,1],[1,1,0,0,0],[0,0,1,0,1],[1,0,1,0,0],[0,1,1,0,0],[0,0,0,1,1],[1,0,0,1,0],[0,1,0,1,0]];a.encodeITF=function(e){if(e.length%2===1){e="0"+e}for(var a=0,r=e.length;a<r;a++){var t=e[a];if(t<"0"||t>"9"){throw new Error("ITF can only encode numbers.")}}var n=[];n.push({char:"START",bits:"1010",humanReadable:false});for(var s=0;s<e.length;s+=2){var i=e[s];var o=e[s+1];var c=i-"0";var h=o-"0";var l="";for(var d=0;d<5;d++){l+=N[c][d]===0?"1":"11";l+=N[h][d]===0?"0":"00"}n.push({char:i+o,bits:l,humanReadable:true})}n.push({char:"STOP",bits:"1101",humanReadable:false});return{type:"bits",data:n}};"use strict";a.drawBitsBarcodeToCanvas=function(e,a,r){var t=r.data.map(function(e){return e.bits}).join("");e.save();var n;var s;var i=t.length+2*a.quietZoneSize;if(!isNaN(a.width)){s=a.width;n=s/i}else{n=a.moduleWidth;s=i*n;if(s>a.maxWidth){s=a.maxWidth;n=s/i}}var o=a.height;e.translate(a.x,a.y);var c=a.angle*Math.PI/180;var h=Math.cos(c);var l=Math.sin(c);var d=[0,s*h,s*h-o*l,-o*l];var u=[0,s*l,s*l+o*h,o*h];var v=Math.min.apply(this,d);var b=Math.min.apply(this,u);var f=Math.max.apply(this,d);var w=Math.max.apply(this,u);switch(a.horizontalAlign){case"left":e.translate(-v,0);break;case"center":e.translate(-(s/2*h-o/2*l),0);break;case"right":e.translate(-f,0);break}switch(a.verticalAlign){case"top":e.translate(0,-b);break;case"middle":e.translate(0,-(s/2*l+o/2*h));break;case"bottom":e.translate(0,-w);break}e.rotate(c);e.translate(a.quietZoneSize*n,0);e.fillStyle="black";var p=0;while(p<t.length){var R=t[p];if(R==="1"){var g=1;while(p<t.length&&t[++p]==="1"){g++}var m=g*n;e.fillRect(0,0,m,o);e.translate(m,0)}else{var C=1;while(p<t.length&&t[++p]==="0"){C++}var E=C*n;e.translate(E,0)}}e.restore();return{barcodeWidth:s,barcodeHeight:o,bbox:{x:v,y:b,width:f-v,height:w-b}}};"use strict";var L={type:"Code 128",hasChecksum:false,x:0,y:0,moduleWidth:2.892,height:90.72,horizontalAlign:"left",verticalAlign:"top",quietZoneSize:10,angle:0,maxWidth:Infinity,width:NaN};var y=function(e,a){for(var r in a){if(typeof e[r]==="undefined"){e[r]=a[r]}}};e=a.drawBarcode=function(e,r,t){if(typeof e!=="object"&&e!=="svg"){throw new Error("drawBarcode: expected `g' to be an object or 'svg'.")}if(!r||typeof r!=="string"){throw new Error("drawBarcode: expected `text' to be a non-empty string.")}if(typeof t!=="object"){t={}}y(t,L);a.validateDrawBarcodeOptions(t);var n;switch(t.type){case"Codabar":n=a.encodeCodabar(r);break;case"Code 128":n=a.encodeCode128(r);break;case"Code 39":n=a.encodeCode39(r);break;case"ITF":n=a.encodeITF(r);break;case"FIM":n=a.encodeFIM(r);break;case"EAN-8":case"EAN-13":case"UPC-A":var s;if(t.type=="EAN-8")s=7;if(t.type=="EAN-13")s=12;if(t.type=="UPC-A")s=11;if(t.hasChecksum)s+=1;if(s!=r.length){throw new Error(t.type+" must be of length "+s)}n=a.encodeEAN(r,t.hasChecksum);break}switch(n.type){case"bits":return a.drawBitsBarcode(e,t,n);default:throw new Error("Unrecognized encoded barcode type: "+n.type)}};a.validateDrawBarcodeOptions=function e(r){a.assertIsBoolean(r.hasChecksum,"options.hasChecksum");a.assertIsNumber(r.x,"options.x");a.assertIsNumber(r.y,"options.y");a.assertIsValidHorizontalAlign(r.horizontalAlign);a.assertIsValidVerticalAlign(r.verticalAlign);a.assertIsPositiveNumber(r.height,"options.height");a.assertIsPositiveNumber(r.moduleWidth,"options.moduleWidth");a.assertIsNonNegativeNumber(r.quietZoneSize,"options.quietZoneSize");a.assertIsNumber(r.angle,"options.angle");a.assertIsPositiveNumber(r.maxWidth,"options.maxWidth");if(!isNaN(r.width)){a.assertIsPositiveNumber(r.width,"options.width")}};a.drawBitsBarcode=function(e,r,t){if(e==="svg"){return a.drawBitsBarcodeToSVG(r,t)}else{return a.drawBitsBarcodeToCanvas(e,r,t)}};"use strict";a.drawBitsBarcodeToSVG=function(e,a){var r=a.data.map(function(e){return e.bits}).join("");var t;var n;var s=r.length+2*e.quietZoneSize;if(!isNaN(e.width)){n=e.width;t=n/s}else{t=e.moduleWidth;n=s*t;if(n>e.maxWidth){n=e.maxWidth;t=n/s}}var i=e.height;var o=[];o.push("<svg "+["xmlns='http://www.w3.org/2000/svg'","width='"+n.toFixed(3)+"'","height='"+i+"'","fill='black'"].join(" ")+">");var c=e.quietZoneSize*t;var h=0;while(h<r.length){var l=r[h];if(l==="1"){var d=1;while(h<r.length&&r[++h]==="1"){d++}var u=d*t;o.push("<rect "+["width='"+u+"'","height='"+i+"'","x='"+c.toFixed(3)+"'","y='0'"].join(" ")+" />");c+=u}else{var v=1;while(h<r.length&&r[++h]==="0"){v++}var b=v*t;c+=b}}o.push("</svg>");return o.join("\n")};"use strict";a.assertIsString=function(e,a){if(typeof e!=="string"){throw new Error("Expected "+a+" to be a string, got "+e)}};a.assertIsNonEmptyString=function(e){if(typeof e!=="string"||e.length===0){throw new Error("Expected a non-empty string, got "+e)}};a.assertIsValidHorizontalAlign=function(e){switch(e){case"left":return;case"center":return;case"right":return;default:throw new Error('Unexpected horizontalAlign (acceptable values are "left", "center", and "right"); got '+e)}};a.assertIsValidVerticalAlign=function(e){switch(e){case"top":return;case"middle":return;case"bottom":return;default:throw new Error('Unexpected verticalAlign (acceptable values are "top", "middle", and "bottom"); got '+e)}};a.assertIsNumber=function(e,a){if(typeof e!=="number"){throw new Error("Expected "+a+" to be a number, got "+e)}};a.assertIsBoolean=function(e,a){if(typeof e!=="boolean"){throw new Error("Expected "+a+" to be a boolean, got "+e)}};a.assertIsPositiveNumber=function(e,a){if(typeof e!=="number"){throw new Error("Expected "+a+" to be a number, got "+e)}if(e<=0){throw new Error("Expected "+a+" to be positive, got "+e)}};a.assertIsNonNegativeNumber=function(e,a){if(typeof e!=="number"){throw new Error("Expected "+a+" to be a number, got "+e)}if(e<0){throw new Error("Expected "+a+" to be positive, got "+e)}};window.drawBarcode=e})();